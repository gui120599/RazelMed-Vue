import{v as y,x,y as S,c as b,o as f,w as t,b as s,u as a,e as l,a as n,q as w,j as E,F as D,l as U,t as v}from"./app-Ok4sUdtS.js";import{t as $}from"./index-B63Ll-vo.js";import{_}from"./index-8ZH9h2Im.js";import{_ as h,a as q}from"./CardContent.vue_vue_type_script_setup_true_lang-DjAwMNog.js";import{_ as p}from"./Input.vue_vue_type_script_setup_true_lang-DPExSES9.js";import{_ as m,a as c}from"./Label.vue_vue_type_script_setup_true_lang-DFIE8u_q.js";import{_ as A,a as B,b as F,c as I,d as N}from"./SelectValue.vue_vue_type_script_setup_true_lang-CtqXLaL6.js";import{_ as j,a as C,b as L,c as O,d as P,e as R}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DAVfuRdv.js";import{S as T}from"./square-pen-Bmjjgwqn.js";import"./useForwardExpose-d_HlJpHD.js";import"./useForwardPropsEmits-BEDIxWjV.js";import"./chevron-down-UoYcpS9p.js";import"./Collection-B8Mmd1n1.js";import"./check-Dq_S-pgT.js";import"./nullish-CtH4V8ap.js";const z={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},M={class:"grid lg:col-span-2 w-full gap-2"},G={class:"grid lg:col-span-1 w-full gap-2"},H={class:"grid w-full gap-2"},J={class:"grid w-full gap-2"},K={class:"flex justify-end items-center gap-4"},ua={__name:"DashboardEditDialog",props:{dashboard:{type:Object,required:!0},institutions:{type:Array,required:!0}},setup(g,{expose:k}){const d=g,u=y(!1),o=x({_method:"put",name:d.dashboard.name,iframe_link:d.dashboard.iframe_link,institution_id:d.dashboard.institution_id,icon:d.dashboard.icon});S(()=>d.dashboard,r=>{o.name=r.name,o.iframe_link=r.iframe_link,o.institution_id=r.institution_id,o.icon=r.icon,o.clearErrors()},{deep:!0});const V=()=>{o.post(route("dashboards.update",d.dashboard.id),{forceFormData:!0,onSuccess:()=>{$.success("Dashboard updated successfully!"),o.clearErrors(),u.value=!1},onError:r=>{console.error("Validation errors:",r),$.error("Failed to update dashboard. Please check the form.")}})};return k({isDialogOpen:u,form:o}),(r,e)=>(f(),b(a(R),{open:u.value,"onUpdate:open":e[5]||(e[5]=i=>u.value=i)},{default:t(()=>[s(a(j),{"as-child":""},{default:t(()=>[s(a(_),{variant:"default",title:"ALTERAR"},{default:t(()=>[s(a(T))]),_:1})]),_:1}),s(a(C),{class:"lg:min-w-[800px] max-h-[90vh] overflow-y-auto"},{default:t(()=>[s(a(L),null,{default:t(()=>[s(a(O),null,{default:t(()=>e[6]||(e[6]=[l("Edit Dashboard")])),_:1,__:[6]}),s(a(P),null,{default:t(()=>e[7]||(e[7]=[l("Atualize os dados do dashboarde.")])),_:1,__:[7]})]),_:1}),s(a(h),null,{default:t(()=>[s(a(q),{class:"space-y-3"},{default:t(()=>[n("form",{class:"space-y-6",onSubmit:w(V,["prevent"])},[n("div",z,[n("div",M,[s(a(m),{for:"name"},{default:t(()=>e[8]||(e[8]=[l("Nome")])),_:1,__:[8]}),s(a(p),{id:"name",autocomplete:"off",modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=i=>a(o).name=i)},null,8,["modelValue"]),s(c,{message:a(o).errors.name},null,8,["message"])]),n("div",G,[s(a(m),{for:"icon"},{default:t(()=>e[9]||(e[9]=[l("Icone")])),_:1,__:[9]}),s(a(p),{type:"text",autocomplete:"off",id:"icon",modelValue:a(o).icon,"onUpdate:modelValue":e[1]||(e[1]=i=>a(o).icon=i)},null,8,["modelValue"]),s(c,{message:a(o).errors.icon},null,8,["message"])]),n("div",H,[s(a(m),{for:"institution_id"},{default:t(()=>e[10]||(e[10]=[l("Instituição")])),_:1,__:[10]}),s(a(A),{id:"institution_id",modelValue:a(o).institution_id,"onUpdate:modelValue":e[2]||(e[2]=i=>a(o).institution_id=i)},{default:t(()=>[s(a(B),{class:"w-full"},{default:t(()=>[s(a(F),{placeholder:"Selecione a Institutição"})]),_:1}),s(a(I),null,{default:t(()=>[(f(!0),E(D,null,U(g.institutions,i=>(f(),b(a(N),{key:i.id,value:i.id},{default:t(()=>[l(v(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),n("div",J,[s(a(m),{for:"iframe_link"},{default:t(()=>e[11]||(e[11]=[l("Iframe Link")])),_:1,__:[11]}),s(a(p),{id:"iframe_link",autocomplete:"off",modelValue:a(o).iframe_link,"onUpdate:modelValue":e[3]||(e[3]=i=>a(o).iframe_link=i)},null,8,["modelValue"]),s(c,{message:a(o).errors.iframe_link},null,8,["message"])]),n("div",K,[s(a(_),{type:"button",variant:"outline",onClick:e[4]||(e[4]=i=>u.value=!1)},{default:t(()=>e[12]||(e[12]=[l("Cancel")])),_:1,__:[12]}),s(a(_),{type:"submit",disabled:a(o).processing},{default:t(()=>[l(v(a(o).processing?"Saving...":"Save Dashboard"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}};export{ua as default};
