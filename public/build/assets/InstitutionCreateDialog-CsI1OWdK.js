import{v as c,x as U,H as y,J as x,c as P,o as v,w as a,b as o,u as e,e as i,a as n,q as k,j as C,s as N,K as V,t as S}from"./app-Ok4sUdtS.js";import{t as w}from"./index-B63Ll-vo.js";import{_}from"./index-8ZH9h2Im.js";import{_ as h,a as D}from"./CardContent.vue_vue_type_script_setup_true_lang-DjAwMNog.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-DPExSES9.js";import{_ as u,a as m}from"./Label.vue_vue_type_script_setup_true_lang-DFIE8u_q.js";import{_ as I}from"./Textarea.vue_vue_type_script_setup_true_lang-B-y36wu5.js";import{_ as R,a as B,b as F,c as L,d as E,e as O}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DAVfuRdv.js";import"./useForwardExpose-d_HlJpHD.js";import"./useForwardPropsEmits-BEDIxWjV.js";const A={class:"flex flex-col items-center gap-2"},J={key:0,class:"mb-2"},T=["src"],q={class:"grid w-full gap-2"},z={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},H={class:"grid lg:col-span-3 w-full gap-2"},K={class:"grid lg:col-span-2 w-full gap-2"},M={class:"grid lg:col-span-1 w-full gap-2"},G={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Q={class:"grid w-full gap-2"},W={class:"grid w-full gap-2"},X={class:"grid w-full gap-2"},Y={class:"flex justify-end items-center gap-4"},ue={__name:"InstitutionCreateDialog",setup(Z,{expose:j}){const p=c(!1),r=c(null),l=U({name:"",reduced_name:"",email:"",phone:"",cnpj:"",address:"",profile_photo:null}),$=()=>{const d={...l.data()};d.cnpj&&(d.cnpj=d.cnpj.replace(/[^0-9]/g,"")),d.phone&&(d.phone=d.phone.replace(/[^0-9]/g,"")),l.post(route("institutions.store"),{data:d,forceFormData:!0,onSuccess:()=>{w.success("Institution created successfully!"),l.reset(),r.value=null,p.value=!1},onError:s=>{console.error("Validation errors:",s),w.error("Failed to create institution. Please check the form.")}})},b=d=>{const s=d.target.files[0];l.profile_photo=s,s?r.value=URL.createObjectURL(s):r.value=null};return y(()=>{r.value&&URL.revokeObjectURL(r.value)}),j({isDialogOpen:p,form:l}),(d,s)=>{const g=x("mask");return v(),P(e(O),{open:p.value,"onUpdate:open":s[7]||(s[7]=t=>p.value=t)},{default:a(()=>[o(e(R),{"as-child":""},{default:a(()=>[o(e(_),{variant:"outline"},{default:a(()=>s[8]||(s[8]=[i("Add Institution")])),_:1,__:[8]})]),_:1}),o(e(B),{class:"lg:min-w-[800px] max-h-[90vh] overflow-y-auto"},{default:a(()=>[o(e(F),null,{default:a(()=>[o(e(L),null,{default:a(()=>s[9]||(s[9]=[i("New Institution")])),_:1,__:[9]}),o(e(E),null,{default:a(()=>s[10]||(s[10]=[i("Insira os dados do novo institutione.")])),_:1,__:[10]})]),_:1}),o(e(h),null,{default:a(()=>[o(e(D),{class:"space-y-3"},{default:a(()=>[n("form",{class:"space-y-6",onSubmit:k($,["prevent"])},[n("div",A,[r.value?(v(),C("div",J,[n("img",{src:r.value,alt:"Profile Preview",class:"w-24 h-24 rounded-full object-cover"},null,8,T)])):N("",!0),n("div",q,[o(e(u),{for:"profile_photo"},{default:a(()=>s[11]||(s[11]=[i("Profile Photo")])),_:1,__:[11]}),o(e(f),{id:"profile_photo",type:"file",onChange:b}),o(m,{message:e(l).errors.profile_photo},null,8,["message"])])]),n("div",z,[n("div",H,[o(e(u),{for:"name"},{default:a(()=>s[12]||(s[12]=[i("Name")])),_:1,__:[12]}),o(e(f),{id:"name",autocomplete:"off",modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=t=>e(l).name=t)},null,8,["modelValue"]),o(m,{message:e(l).errors.name},null,8,["message"])]),n("div",K,[o(e(u),{for:"reduced_name"},{default:a(()=>s[13]||(s[13]=[i("Nome Reduzido")])),_:1,__:[13]}),o(e(f),{id:"reduced_name",autocomplete:"off",modelValue:e(l).reduced_name,"onUpdate:modelValue":s[1]||(s[1]=t=>e(l).reduced_name=t)},null,8,["modelValue"]),o(m,{message:e(l).errors.reduced_name},null,8,["message"])]),n("div",M,[o(e(u),{for:"cnpj"},{default:a(()=>s[14]||(s[14]=[i("CPF/CNPJ")])),_:1,__:[14]}),V(o(e(f),{id:"cnpj",autocomplete:"off",modelValue:e(l).cnpj,"onUpdate:modelValue":s[2]||(s[2]=t=>e(l).cnpj=t)},null,8,["modelValue"]),[[g,["###.###.###-##","##.###.###/####-##"]]]),o(m,{message:e(l).errors.cnpj},null,8,["message"])])]),n("div",G,[n("div",Q,[o(e(u),{for:"phone"},{default:a(()=>s[15]||(s[15]=[i("Phone")])),_:1,__:[15]}),V(o(e(f),{type:"tel",autocomplete:"off",id:"phone",modelValue:e(l).phone,"onUpdate:modelValue":s[3]||(s[3]=t=>e(l).phone=t)},null,8,["modelValue"]),[[g,["(##) ####-####","(##)# ####-####"]]]),o(m,{message:e(l).errors.phone},null,8,["message"])]),n("div",W,[o(e(u),{for:"email"},{default:a(()=>s[16]||(s[16]=[i("Email")])),_:1,__:[16]}),o(e(f),{type:"email",autocomplete:"off",id:"email",modelValue:e(l).email,"onUpdate:modelValue":s[4]||(s[4]=t=>e(l).email=t)},null,8,["modelValue"]),o(m,{message:e(l).errors.email},null,8,["message"])])]),n("div",X,[o(e(u),{for:"address"},{default:a(()=>s[17]||(s[17]=[i("Address")])),_:1,__:[17]}),o(e(I),{id:"address",autocomplete:"off",modelValue:e(l).address,"onUpdate:modelValue":s[5]||(s[5]=t=>e(l).address=t)},null,8,["modelValue"]),o(m,{message:e(l).errors.address},null,8,["message"])]),n("div",Y,[o(e(_),{type:"button",variant:"outline",onClick:s[6]||(s[6]=t=>p.value=!1)},{default:a(()=>s[18]||(s[18]=[i("Cancel")])),_:1,__:[18]}),o(e(_),{type:"submit",disabled:e(l).processing},{default:a(()=>[i(S(e(l).processing?"Saving...":"Save Institution"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}};export{ue as default};
